{% extends "base.html" %}
{% load static %}

{% block body %}
<p>lorem ipsum</p>
    <div class="info">
        <h2>Perfil de {{ user.first_name }} {{ user.last_name }}</h2>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Usuario:</strong> {{ user.username }}</p>
    </div>

    <!-- Si los datos est√°n COMPLETOS -->
    {% if datos_completos and not request.POST %}
    <div class="info datos-completos">
        <h2>‚úÖ Informaci√≥n Personal Completa</h2>
        <p><strong>C√©dula:</strong> {{ cliente.cedula }}</p>
        <p><strong>Tel√©fono:</strong> {{ cliente.telefono }}</p>
        <p><strong>Direcci√≥n:</strong> {{ cliente.direccion }}</p>
        
        <form method="POST" style="display: inline;">
            {% csrf_token %}
            <button type="submit" name="editar" class="btn btn-editar">‚úèÔ∏è Editar Perfil</button>
        </form>
    </div>

    <!-- Si los datos est√°n INCOMPLETOS o est√° en modo edici√≥n -->
    {% else %}
    <div class="info datos-incompletos">
        <h2>
            {% if datos_completos %}
                ‚úèÔ∏è Editando Perfil
            {% else %}
                üìù Completa Tu Informaci√≥n Personal
            {% endif %}
        </h2>

        <form method="POST">
            {% csrf_token %}

            <div class="form-group">
                <label for="id_cedula">C√©dula *:</label>
                {{ form.cedula }}
                {% if form.cedula.errors %}
                    <div style="color: red; font-size: 0.9em; margin-top: 5px;">
                        {% for error in form.cedula.errors %}
                            ‚ùå {{ error }}
                        {% endfor %}
                    </div>
                {% endif %}
                <small style="color: #666; display: block; margin-top: 5px;">
                    M√≠nimo 6 caracteres, solo n√∫meros y guiones
                </small>
            </div>
            
            <div class="form-group">
                <label for="id_telefono">Tel√©fono *:</label>
                {{ form.telefono }}
                {% if form.telefono.errors %}
                    <div style="color: red; font-size: 0.9em; margin-top: 5px;">
                        {% for error in form.telefono.errors %}
                            ‚ùå {{ error }}
                        {% endfor %}
                    </div>
                {% endif %}
                <small style="color: #666; display: block; margin-top: 5px;">
                    Ejemplo: +57 123 456 7890
                </small>
            </div>
            
            <div class="form-group">
                <label for="id_direccion">Direcci√≥n *:</label>
                {{ form.direccion }}
                {% if form.direccion.errors %}
                    <div style="color: red; font-size: 0.9em; margin-top: 5px;">
                        {% for error in form.direccion.errors %}
                            ‚ùå {{ error }}
                        {% endfor %}
                    </div>
                {% endif %}
                <small style="color: #666; display: block; margin-top: 5px;">
                    Direcci√≥n completa de residencia
                </small>
            </div>
            
            <button type="submit" class="btn btn-guardar">üíæ Guardar Informaci√≥n</button>
            
            {% if datos_completos %}
                <a href="{% url 'perfil' %}" class="btn btn-cancelar">‚ùå Cancelar</a>
            {% endif %}
        </form>
    </div>

    {% endif %}
        <div>
        <p><a href="{% url 'mis_sugerencias' %}">Ver mis sugerencias enviadas</a></p>
    </div>
    </div>
{% endblock body %}